<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="schema" content="https://dmccreary.github.io/intelligent-textbooks/ns/microsim/v1">
    <title>Chapter Organization Workflow Diagram</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main class="container">
        <div class="diagram-panel">
            <div class="mermaid">
flowchart TD
    Start("Chapter Planning Initiated"):::planningNode
    ReviewDependencies["Review Concept Dependencies"]:::planningNode
    StructureType{"Linear or Branching Structure?"}:::decisionNode
    LinearSequence["Create Linear Section Sequence"]:::organizationNode
    ParallelTracks["Create Parallel Section Tracks"]:::organizationNode
    AssignConcepts["Assign Concepts to Sections"]:::organizationNode
    PlanElements["Plan Non-Text Elements"]:::organizationNode
    DependenciesSatisfied{"All Dependencies Satisfied?"}:::decisionNode
    ReorganizeSections["Reorganize Sections"]:::verificationNode
    FinalizeStructure["Finalize Chapter Structure"]:::verificationNode
    End("Chapter Structure Complete"):::verificationNode

    Start --> ReviewDependencies --> StructureType
    StructureType -->|Linear| LinearSequence
    StructureType -->|Branching| ParallelTracks
    LinearSequence --> AssignConcepts
    ParallelTracks --> AssignConcepts
    AssignConcepts --> PlanElements --> DependenciesSatisfied
    DependenciesSatisfied -->|No| ReorganizeSections --> DependenciesSatisfied
    DependenciesSatisfied -->|Yes| FinalizeStructure --> End

    classDef planningNode fill:#3a86ff,stroke:#1f2937,stroke-width:2px,color:#ffffff,font-size:16px
    classDef decisionNode fill:#ffd166,stroke:#1f2937,stroke-width:2px,color:#1f2937,font-size:16px
    classDef organizationNode fill:#43aa8b,stroke:#1f2937,stroke-width:2px,color:#ffffff,font-size:16px
    classDef verificationNode fill:#f77f00,stroke:#1f2937,stroke-width:2px,color:#ffffff,font-size:16px

    linkStyle default stroke:#6b7280,stroke-width:2px,font-size:16px
            </div>
        </div>
        <div class="info-panel">
            <h3>Details</h3>
            <div id="info-display">
                <p class="info-placeholder">Hover over a node to see details</p>
            </div>
        </div>
    </main>

    <script>
        const nodeInfo = {
            Start: {
                title: 'Chapter Planning Initiated',
                description: 'Beginning with chapter title, summary, and concept list from book-chapter-generator.'
            },
            ReviewDependencies: {
                title: 'Review Concept Dependencies',
                description: 'Examine learning graph to identify prerequisite relationships among chapter concepts.'
            },
            StructureType: {
                title: 'Linear or Branching Structure?',
                description: 'Determine if concepts build linearly or if multiple parallel tracks exist.'
            },
            LinearSequence: {
                title: 'Create Linear Section Sequence',
                description: 'Order sections from foundational to advanced, one concept building on the previous.'
            },
            ParallelTracks: {
                title: 'Create Parallel Section Tracks',
                description: 'Group related concepts into parallel sections that can be studied in flexible order.'
            },
            AssignConcepts: {
                title: 'Assign Concepts to Sections',
                description: 'Map each concept from the concept list to specific chapter sections.'
            },
            PlanElements: {
                title: 'Plan Non-Text Elements',
                description: 'Identify where diagrams, MicroSims, tables, and other visual elements will enhance learning.'
            },
            DependenciesSatisfied: {
                title: 'All Dependencies Satisfied?',
                description: "Verify that each section's concepts have their prerequisites covered in earlier sections or previous chapters."
            },
            ReorganizeSections: {
                title: 'Reorganize Sections',
                description: 'Reorder sections to ensure prerequisite concepts appear first. Returns to dependency check.'
            },
            FinalizeStructure: {
                title: 'Finalize Chapter Structure',
                description: 'Lock in the section organization and proceed to content generation.'
            },
            End: {
                title: 'Chapter Structure Complete',
                description: 'Ready for detailed content generation with clear section organization.'
            }
        };
    </script>
    <script src="script.js"></script>
</body>
</html>
